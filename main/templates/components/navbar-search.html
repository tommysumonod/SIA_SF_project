{% load static %}

<div class="navbar">
  <div class="left-nav">
    <a href="{% url 'hero' %}">
      <img src="{% static 'images/Solid-Forge.png' %}" alt="SF-Logo" class="logo">
    </a>

    <div class="search-area">
      <a href="{% url 'all_uploads' %}" class="explore-btn">EXPLORE</a>
    </div>

    <div class="search-container">
      <input type="text" id="search-input" placeholder="Search artworks...">
      <button id="clear-btn">
        <img src="https://cdn-icons-png.flaticon.com/128/9357/9357401.png" alt="clear">
      </button>
    </div>
  </div>

  <div class="right-nav">
    <nav>
      <a href="{% url 'chat_home' %}" class="nav-span" id="chat-link">CHATS</a>
      <a href="{% url 'create' %}" class="nav-span" id="create-link">CREATE</a>
      <a href="#" class="nav-span" id="about-link">ABOUT</a>
    </nav>

    {% if user %}
      <div class="profile-info">
        <a href="{% url 'profile' %}#profile-card">
          {% if user.profile_pic %}
            <img src="{{ user.profile_pic.url }}" alt="Profile" class="profile-pic">
          {% else %}
            <img src="https://cdn-icons-png.flaticon.com/128/149/149071.png" alt="Default Profile" class="profile-pic">
          {% endif %}
        </a>
        <span>
          {% if user.firstname or user.lastname %}
            {{ user.firstname }} {{ user.lastname }}
          {% else %}
            {{ user.username }}
          {% endif %}
        </span>
        <a href="{% url 'logout' %}" class="nav-btn">Logout</a>
      </div>
    {% else %}
      <div class="account-form">
        <a href="{% url 'signin' %}" class="nav-btn login-btn" id="login-link">LOG IN</a>
        <a href="{% url 'signup' %}" class="nav-btn signup-btn" id="signup-link">SIGN UP</a>
      </div>
    {% endif %}
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const searchInput = document.getElementById('search-input');
  const clearBtn = document.getElementById('clear-btn');

  // Clear search input
  clearBtn.addEventListener('click', function () {
    searchInput.value = '';
  });

  // Handle "Enter" key press
  searchInput.addEventListener('keypress', function (e) {
    if (e.key === 'Enter') {
      e.preventDefault();
      const query = searchInput.value.trim();

      if (query) {
        // âœ… Redirect to the search results page (no alert)
        window.location.href = `/search/?q=${encodeURIComponent(query)}`;
      }
    }
  });
});
</script>
