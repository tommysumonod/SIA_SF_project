{% load static %}

<div class="profile-card-container">
  <div class="profile-card-content">
    <div class="profile-card-right">
      <div class="profile-viewer">
        {% if is_owner %}
          <label for="profilePicInput" style="cursor:pointer;">
            <img 
              id="profilePic"
              src="{% if profile_user.profile_pic and profile_user.profile_pic.url %}{{ profile_user.profile_pic.url }}{% else %}https://cdn-icons-png.flaticon.com/128/149/149071.png{% endif %}"
              alt="Profile Picture">
          </label>
          <input type="file" id="profilePicInput" name="profile_pic" accept="image/*" hidden>
          <p id="uploadMessage" style="margin-top: 10px; font-size: 14px;"></p>
        {% else %}
          <img 
            src="{% if profile_user.profile_pic and profile_user.profile_pic.url %}{{ profile_user.profile_pic.url }}{% else %}https://cdn-icons-png.flaticon.com/128/149/149071.png{% endif %}"
            alt="Profile Picture">
        {% endif %}

        <h1 class="profile-name">{{ profile_user.firstname }} {{ profile_user.lastname }}</h1>

        {% if not is_owner %}
          <div class="chat-btn-container">
            <a href="{% url 'chat_with_user' profile_user.uid %}" class="chat-btn">ðŸ’¬ Chat</a>
          </div>
        {% endif %}
      </div>

      <div class="contents-container" id="profileInfo">
        <label>Address</label>
        <p id="addressDisplay">{{ profile_bio.address|default:"Not provided" }}</p>
        {% if is_owner %}
          <input type="text" id="addressInput" value="{{ profile_bio.address }}" style="display:none;">
        {% endif %}

        <label>Email</label>
        <p>{{ profile_user.email }}</p>

        <label>Bio</label>
        <p id="bioDisplay">{{ profile_bio.bio|default:"No bio available" }}</p>
        {% if is_owner %}
          <textarea id="bioInput" style="display:none;">{{ profile_bio.bio }}</textarea>
        {% endif %}

        {% if is_owner %}
          <div class="button-group">
            <button id="editBtn">Edit</button>
            <button id="saveBtn" style="display: none;">Save</button>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
